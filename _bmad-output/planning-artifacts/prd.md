---
stepsCompleted:
  - step-01-init
  - step-02-discovery
  - step-02b-vision
  - step-02c-executive-summary
  - step-03-success
  - step-04-journeys
  - step-05-domain-skipped
  - step-06-innovation
  - step-07-project-type
  - step-08-scoping
  - step-09-functional
  - step-10-nonfunctional
  - step-11-polish
  - step-12-complete
inputDocuments: []
documentCounts:
  briefs: 0
  research: 0
  brainstorming: 0
  projectDocs: 0
workflowType: 'prd'
classification:
  projectType: web_app_ai_agent
  domain: hospitality_customer_service
  complexity: medium
  projectContext: greenfield
---

# Product Requirements Document - AI_coding_demo

**Author:** Admin
**Date:** 2026-02-26

## Executive Summary

酒店/OTA 行业的客服团队当前依赖纯人工操作处理日常业务——通过企业微信在上下游之间传递信息，在业务系统中手动查询、登记和反馈。一个典型的"提前离店"请求需要客服在多个系统和群聊之间反复切换，涉及订单查询、上游沟通、等待回复、退款登记、下游反馈等多个环节。现有"智能机器人"仅能实现知识库问答，无法执行这类需要多步骤、跨系统协作的实际业务操作。

本产品是一个 **AI Agent 客服自动化演示系统**，面向客服管理层和业务决策者，通过一个完整可运行的 Demo 证明 AI Agent 能够替代人工完成端到端的客服操作流程。系统内部模拟企微群聊、业务系统和上下游交互，无需任何外部接口依赖，开箱即可演示。模拟层采用可替换设计，Demo 验证通过后可直接对接真实接口进入生产环境。

### What Makes This Special

- **Agent 能"做事"而非"回答问题"**：AI Agent 能调用接口执行实际操作——查询订单、发送消息、登记退款——而非仅从知识库检索答案
- **全流程信息透明**：每一步的输入、输出、工具调用和决策依据完整呈现，建立对 AI 决策的信任，而非面对黑盒
- **自然语言驱动的 Skill 架构**：每个业务场景对应一个 Skill 文件，用自然语言描述完整处理流程。用户消息进入后，Agent 自动识别意图并路由到对应 Skill 执行。新增场景只需新增 Skill 文件，无需改动代码；仅在新增底层工具时需要开发介入
- **低成本场景扩展**：同一架构模式覆盖提前离店、催单、取消、投诉、发票催收等所有客服场景，业务扩展边际成本极低
- **概念验证价值**：作为 PoC 项目，为后续 AI 客服大规模落地提供可行性验证和决策依据

## Project Classification

- **项目类型：** Web App + AI Agent 系统
- **领域：** 酒店/OTA 客服自动化
- **复杂度：** 中等（涉及 Agent 编排、模拟消息系统、工作流可视化，但作为 Demo 范围可控）
- **项目上下文：** Greenfield（全新项目）

## Success Criteria

### User Success

- 业务决策者观看 Demo 后能直观理解 AI Agent 的工作方式和能力边界
- 观看者能清晰看到完整闭环：用户消息 → 意图识别 → Skill 加载 → 流程执行 → 结果返回
- 两个不同场景的演示让观看者确信：新增场景只需新增 Skill，架构具备通用性

### Business Success

- Demo 作为独立的概念验证，成功展示 AI Agent 替代人工客服操作的可行性
- 业务方认可"AI 能做事"这一核心命题，突破"AI 只能聊天"的认知

### Technical Success

- Web 页面打开即可运行，无需复杂配置
- 全部模拟运行，零外部依赖
- Agent 每一步操作（意图识别、Skill 加载、工具调用、输入输出）在界面上清晰可见
- 信息流清晰呈现消息的发送和接收

### Measurable Outcomes

- 覆盖 2 个不同业务场景（1 个完整流程 + 1 个简化流程），证明 Skill 路由机制的通用性
- 非技术人员（业务同事）能独立理解 Demo 展示内容，无需技术人员旁边解释

## Product Scope

### MVP (Phase 1)

**MVP Approach：** 概念验证型（PoC MVP）——用最小功能集证明"AI Agent 能替代人工执行客服操作"。单人开发，前后端 + AI Agent 一体化。

**场景覆盖：**
- **场景 1（完整流程）：提前离店** — 接收下游消息 → 查询订单 → 通知上游 → 等待上游回复 → 退款登记 → 回复下游
- **场景 2（简化流程）：订单取消** — 接收取消请求 → 调用取消接口 → 回复结果

**核心能力：**
- 消息输入界面（用户打字输入模拟下游消息）
- 意图识别 + Skill 路由（根据消息内容自动选择 Skill）
- Agent 工作流可视化面板（逐步展示意图识别、Skill 加载、工具调用、输入输出）
- 模拟工具集（订单查询、消息发送、退款登记、订单取消）
- 模拟上游自动回复
- 管理页面（Skill 列表 + 工具列表 + Skill 内容查看）
- 未匹配意图的友好提示 + 已支持场景列表
- 历史执行记录与回放
- 前后端轮询通信

### Phase 2 (Post-MVP)

- 新增更多客服场景 Skill（催单、投诉、发票催收等）
- 接入真实企微和业务系统接口，替换模拟层
- 小流量灰度测试机制

### Phase 3 (Expansion)

- 生产级部署，全面替代重复性人工操作
- 业务人员自助 Skill 管理后台
- 多 Agent 协作处理复杂跨部门流程

## User Journeys

### 旅程 1：完整流程演示（提前离店）

**人物：** 李姐，客服团队主管，管理 15 人团队，每天看着团队在企微群里来回复制粘贴订单号，一直在想"这种重复劳动到底有没有办法自动化"。

**开场：** 李姐打开 Demo 的 Web 页面，看到简洁的界面——左侧是消息输入区，右侧是 Agent 工作过程的可视化面板。她在输入框里打入："订单号 HT20260301001 的客人申请 3 月 5 日提前离店"。

**发展：** 按下发送后，右侧面板逐步展示 Agent 的工作过程：
1. **意图识别** — 判定为"提前离店"场景，加载对应 Skill
2. **查询订单** — 调用"订单查询"工具，输入 HT20260301001，返回供应商订单号 SUP-88901
3. **通知上游** — 调用"发送消息"工具，向上游群发送 SUP-88901 + 客人诉求
4. **等待回复** — 模拟上游自动回复"已处理完成"
5. **退款登记** — 调用"退款登记"工具，返回"退款成功"
6. **回复下游** — 调用"发送消息"工具，在下游群回复处理结果

**高潮：** 整个流程自动完成，每一步的工具调用、输入参数、返回结果清清楚楚。李姐理解了：AI 不是在"聊天"，而是在"做事"。

**结局：** "这不就是我们客服每天干的事吗？如果能接上真实系统..."

### 旅程 2：不同场景验证（订单取消）

**人物：** 李姐想验证系统是否只能处理提前离店。

**开场：** 在输入框打入一条订单取消请求。

**发展：** Agent 识别出不同意图，加载另一个 Skill，执行不同流程步骤。

**高潮：** 不同消息进来，Agent 自动判断场景走不同流程。系统是通用的，不是写死的。

**结局：** "以后每加一个新场景，只要写一个新的 Skill 就行了？"

### 旅程 3：管理视角

**人物：** 李姐想了解系统的"幕后"。

**开场：** 切换到管理页面，看到 Skill 列表和工具列表。

**发展：** 点开"提前离店"Skill，看到自然语言写的流程描述。查看工具列表，看到各工具的名称和说明。

**高潮：** Skill 里写的就是团队每天干的事，只不过用文字描述出来让 AI 执行。

**结局：** "这个我看得懂，以后要改流程是不是改这个文件就行？"

### 旅程 4：异常情况

**人物：** 李姐想测试 AI 遇到无法处理的消息。

**开场：** 输入"今天天气怎么样"。

**发展：** Agent 无法匹配 Skill，面板显示：意图识别 → 无匹配场景 → 返回提示。

**高潮：** 系统没有胡乱执行，而是明确告知"无法处理此请求"并展示已支持场景列表。

**结局：** AI 不会乱来，只做有 Skill 定义的事情。

### Journey Requirements Summary

| 旅程 | 揭示的核心能力需求 |
|------|-------------------|
| 旅程 1（完整流程） | 消息输入、意图识别、Skill 加载、工具调用链、工作流可视化、模拟消息系统 |
| 旅程 2（不同场景） | Skill 路由机制、多场景支持、意图分类 |
| 旅程 3（管理视角） | Skill 列表展示、工具列表展示、Skill 内容查看 |
| 旅程 4（异常情况） | 未匹配意图处理、错误边界、已支持场景提示 |

## Innovation & Novel Patterns

### Detected Innovation Areas

- **Agent 执行模式**：从"知识库问答"跨越到"多步骤业务操作执行"，AI Agent 不再是聊天机器人，而是能调用接口完成实际工作的自动化执行者
- **自然语言流程编排**：用自然语言 Skill 文件定义业务流程，Agent 通过意图识别自动路由到对应 Skill 执行，在酒店/OTA 客服领域属于全新概念
- **轻量级 Agent 调度**：意图识别 → Skill 路由 → 工具调用链，简洁但完整的 Agent 调度架构

### Strategic Context

- **内部能力建设**，目标是自主掌握 AI Agent 客服自动化能力，不依赖外部供应商
- 市场上已有类似方向产品，但自建的价值在于：完全贴合自身业务流程、可控、可迭代
- 不对外销售，专注解决自身客服效率问题

### Validation Approach

- **阶段 1（当前）：** Demo 概念验证，全模拟环境，证明技术可行性
- **阶段 2（验证后）：** 接入真实接口，低风险场景切小流量测试
- **阶段 3（验证通过）：** 逐步扩大场景覆盖和流量比例

## Technical Requirements

### Project-Type Overview

SPA 单页应用 + AI Agent 后端的 Demo 系统。本地运行，面向桌面浏览器（Chrome/Edge），不考虑并发、SEO、移动端适配。核心诉求：**简单、好调试、清晰展示 Agent 工作流程**。

### Architecture Considerations

**前端：**
- SPA 单页应用，现代浏览器（Chrome/Edge）
- 桌面端展示，无需响应式适配
- 通过轮询获取 Agent 执行状态，可视化面板逐步展示每一步
- 技术栈不限，以最简单、最易调试为原则

**后端：**
- 本地运行（localhost），无需远程部署
- 单用户单会话，不考虑并发
- 提供 API 给前端获取 Agent 执行状态和结果

**AI Agent 层：**
- **LangGraph** 管理 Agent 工作流和状态
- LLM 集成：**Gemini**（ChatGoogleGenerative）
- Agent 核心能力：意图识别、Skill 路由、工具调用链执行
- Skill 和工具定义配置在代码中

**模拟层：**
- 内部模拟企微消息收发（无需真实企微接口）
- 内部模拟业务系统（订单查询、退款登记等）
- 上游回复由系统自动模拟生成

### Implementation Considerations

- 优先保证**可调试性**——Agent 每一步的输入输出都应可追踪
- 前后端通信采用轮询方式，简单可靠
- 模拟数据硬编码，无需数据库
- 整体架构保持极简，避免过度工程化

### Risk Mitigation

- LangGraph + Gemini 集成可能存在兼容性问题 → 预留备选 LLM 方案
- Demo 阶段零风险——全部模拟，不影响真实业务
- Skill 架构保证 Agent 只做有定义的事，不会越界操作
- Demo 范围锁定 2 个场景 + 管理页面，不扩展

## Functional Requirements

### 消息输入与交互

- FR1: 操作者可以在输入框中输入自由文本消息模拟下游客服请求
- FR2: 操作者可以发送消息触发 Agent 处理流程
- FR3: 操作者可以查看 Agent 最终回复给下游的处理结果

### 意图识别与 Skill 路由

- FR4: Agent 可以分析接收到的消息内容并识别业务意图
- FR5: Agent 可以根据识别到的意图自动匹配并加载对应的 Skill
- FR6: Agent 在无法匹配任何 Skill 时可以返回友好提示并展示当前已支持的场景列表

### 提前离店场景（Skill 1）

- FR7: Agent 可以从用户消息中提取订单号和客户诉求信息
- FR8: Agent 可以调用订单查询工具，根据订单号获取对应的供应商订单号
- FR9: Agent 可以调用消息发送工具，向上游群发送供应商订单号和客户诉求
- FR10: Agent 可以等待模拟上游的自动回复并接收处理结果
- FR11: Agent 可以调用退款登记工具，根据上游回复执行退款操作
- FR12: Agent 可以调用消息发送工具，向下游群回复最终处理结果

### 订单取消场景（Skill 2）

- FR13: Agent 可以从用户消息中提取订单号和取消请求信息
- FR14: Agent 可以调用订单取消工具执行取消操作
- FR15: Agent 可以向下游回复取消结果（成功或失败）

### 工作流可视化

- FR16: 操作者可以实时查看 Agent 当前正在执行的步骤
- FR17: 操作者可以查看每一步的工具名称、输入参数和返回结果
- FR18: 操作者可以查看 Agent 的意图识别结果和加载的 Skill 名称
- FR19: 操作者可以查看 Agent 执行过程中的完整信息流（从接收消息到最终回复）

### 模拟系统

- FR20: 系统可以模拟企微下游群消息的接收
- FR21: 系统可以模拟企微上游群消息的发送和接收
- FR22: 系统可以模拟上游供应商的自动回复（处理完成）
- FR23: 系统可以模拟业务系统的订单查询功能（根据订单号返回供应商订单号）
- FR24: 系统可以模拟业务系统的退款登记功能（返回退款成功/失败）
- FR25: 系统可以模拟业务系统的订单取消功能（返回取消成功/失败）
- FR26: 模拟系统对无效输入数据（如不存在的订单号）可以返回合理的错误信息

### 管理视角

- FR27: 操作者可以查看当前系统中所有已注册的 Skill 列表
- FR28: 操作者可以查看每个 Skill 的自然语言流程描述内容
- FR29: 操作者可以查看当前系统中所有已注册的工具列表及其说明

### 系统管理

- FR30: 前端可以通过轮询方式获取 Agent 的最新执行状态和步骤信息
- FR31: 操作者可以清空当前会话并重新开始新一轮演示
- FR32: 操作者可以在演示视图和管理视图之间自由切换
- FR33: Agent 在工具调用返回错误时可以展示错误信息并优雅地结束当前流程
- FR34: 操作者可以查看历史执行记录，并可选择回放某一次的完整执行过程
- FR35: 系统启动时可以从配置中自动加载 Skill 定义和工具定义

## Non-Functional Requirements

### Performance

- Agent 单次完整流程执行（从接收消息到最终回复）应在 30 秒内完成
- 前端轮询间隔不超过 1 秒，确保可视化面板更新流畅
- 页面首次加载在 3 秒内完成

### Maintainability

- 新增 Skill 只需添加 Skill 配置文件，无需修改核心代码逻辑
- 新增模拟工具只需注册工具定义，遵循统一的工具接口规范
- 模拟数据与业务逻辑分离，便于后续替换为真实接口
- 代码结构清晰，便于单人调试和迭代
