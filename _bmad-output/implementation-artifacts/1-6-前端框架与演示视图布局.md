# Story 1.6: 前端框架与演示视图布局

Status: done

<!-- Note: Validation is optional. Run validate-create-story for quality check before dev-story. -->

## Story

As a 操作者,
I want 打开页面看到清晰的演示界面布局——顶部导航栏、左侧消息面板、右侧动作日志面板,
so that 拥有专业的演示框架，为后续交互功能提供视觉容器。

## Acceptance Criteria

1. **Given** 用户打开 localhost:5173 **When** 页面加载 **Then** 看到顶部导航栏（56px），包含"演示"、"管理"、"历史"三个导航项（FR32）

2. **Given** 演示视图 **When** 查看布局 **Then** 左侧消息面板占 35% 宽度，右侧动作日志面板占 65% 宽度

3. **Given** 右侧动作日志面板 **When** 尚未发送消息 **Then** 显示欢迎提示"发送一条消息，观看 Agent 的工作过程"

4. **Given** src/types/index.ts **When** 查看类型定义 **Then** 包含与后端 Pydantic 模型对应的 TypeScript 类型（ActionLogEntry、ChannelMessage、AgentExecutionState 等），JSON 字段为 snake_case

5. **Given** src/services/api.ts **When** 查看 API 封装 **Then** 包含 sendMessage、pollStatus、getMessages 等函数，所有后端调用通过此模块

6. **Given** src/context/AppContext.tsx **When** 查看全局状态 **Then** 使用 React Context 管理会话状态、当前频道、动作日志等

7. **Given** Ant Design ConfigProvider **When** 查看配置 **Then** 使用蓝色 #1677FF 作为主色调

8. **Given** 页面首次加载 **When** 计时 **Then** 在 3 秒内完成（NFR3）

## Tasks / Subtasks

- [x] Task 1: 定义 TypeScript 类型 (AC: #4)
  - [x] 1.1 在 `src/types/index.ts` 中定义所有后端对应的 TypeScript 类型
  - [x] 1.2 枚举类型：ActionType、ActionStatus、SessionStatus、Channel
  - [x] 1.3 数据类型：ActionLogEntry、ChannelMessage、AgentExecutionState
  - [x] 1.4 API 类型：SkillDefinition、ToolDefinition、ExecutionHistory
  - [x] 1.5 请求/响应类型：ChatRequest、ChatResponse、StatusResponse、ErrorResponse

- [x] Task 2: 实现 API 服务层 (AC: #5)
  - [x] 2.1 在 `src/services/api.ts` 中封装所有后端 API 调用函数
  - [x] 2.2 实现 sendMessage(message) → ChatResponse
  - [x] 2.3 实现 pollStatus(sessionId, afterIndex?) → StatusResponse
  - [x] 2.4 实现 getMessages(channel) → ChannelMessage[]
  - [x] 2.5 实现 getSkills() → SkillDefinition[]
  - [x] 2.6 实现 getSkillDetail(skillId) → SkillDefinition
  - [x] 2.7 实现 getTools() → ToolDefinition[]
  - [x] 2.8 实现 deleteSession() → void
  - [x] 2.9 实现 getHistory() → ExecutionHistory[]
  - [x] 2.10 实现 getHistoryDetail(executionId) → ExecutionHistory
  - [x] 2.11 统一错误处理：检查响应中的 error 字段

- [x] Task 3: 实现 React Context 全局状态 (AC: #6)
  - [x] 3.1 在 `src/context/AppContext.tsx` 中定义 AppState 接口和 AppContext
  - [x] 3.2 状态包含：sessionId、sessionStatus、actions、currentChannel、unreadChannels、messages（按频道）、finalReply
  - [x] 3.3 提供 dispatch 操作或状态更新函数
  - [x] 3.4 在 App.tsx 中用 AppProvider 包裹路由

- [x] Task 4: 实现顶部导航栏布局 (AC: #1, #7)
  - [x] 4.1 修改 App.tsx：添加 Ant Design Layout.Header 顶部导航栏（56px）
  - [x] 4.2 使用 Ant Design Menu（horizontal 模式）包含三个导航项："演示"、"管理"、"历史"
  - [x] 4.3 导航项点击通过 React Router 路由切换（/、/admin、/history）
  - [x] 4.4 当前路由高亮对应导航项
  - [x] 4.5 右侧预留"清空会话"按钮位置（本 Story 中按钮不需要功能，仅布局占位）
  - [x] 4.6 修复 main.tsx 中重复的 `locale={zhCN}` 属性

- [x] Task 5: 实现演示视图左右分屏布局 (AC: #2, #3)
  - [x] 5.1 在 `src/views/DemoView/DemoView.tsx` 中实现左右分屏布局
  - [x] 5.2 左侧消息面板占 35% 宽度：显示频道 Tab 占位（"对话"、"下游群"、"上游群"）
  - [x] 5.3 右侧动作日志面板占 65% 宽度：显示空状态欢迎提示"发送一条消息，观看 Agent 的工作过程"
  - [x] 5.4 左侧底部预留消息输入框区域（Input + Button 布局占位，本 Story 不接 API）
  - [x] 5.5 拆分子组件文件：`MessagePanel.tsx`（左侧）、`ActionLogPanel.tsx`（右侧）

- [x] Task 6: 实现管理视图和历史视图占位 (AC: #1)
  - [x] 6.1 更新 `src/views/AdminView/AdminView.tsx`：显示"Skill 列表"和"工具列表"两个区域占位
  - [x] 6.2 更新 `src/views/HistoryView/HistoryView.tsx`：显示历史记录列表占位和空状态提示

- [x] Task 7: 验证整体功能 (AC: #1-#8)
  - [x] 7.1 启动前端开发服务器，验证页面可正常加载
  - [x] 7.2 验证三个路由可正常切换
  - [x] 7.3 验证导航栏高亮跟随路由变化
  - [x] 7.4 验证演示视图左右分屏比例正确
  - [x] 7.5 验证空状态欢迎提示显示

## Dev Notes

### 核心设计：视觉框架优先，交互后续补充

本 Story 是前端的**第一个实现 Story**，目标是建立完整的视觉框架和基础设施（类型、API 层、状态管理），为后续 Story 1.7（消息交互）和 Story 1.8（动作日志可视化）提供容器。

**本 Story 要做的：**
- 完整的 TypeScript 类型定义（镜像后端 Pydantic 模型）
- 完整的 API 服务层封装（所有 9 个端点）
- React Context 全局状态管理基础
- 顶部导航栏 + 路由切换
- 演示视图左右分屏布局（静态框架）
- 管理/历史视图占位

**本 Story 不做的：**
- 消息发送功能（Story 1.7）
- 频道 Tab 切换和红点逻辑（Story 1.7）
- 轮询逻辑和动作日志渲染（Story 1.8）
- ChatBubble、ActionLogItem、ChannelTab 自定义组件实现（Story 1.7/1.8）
- 清空会话按钮功能（Story 2.2）

### 当前前端代码库状态（Story 1.1 创建）

Story 1.1 已创建的前端骨架：

```
frontend/src/
├── App.tsx              # 已有 BrowserRouter + 3 条 Route
├── main.tsx             # 已有 ConfigProvider（zhCN + #1677FF）⚠️ 有重复 locale 属性
├── index.css            # body { margin: 0; min-height: 100vh; }
├── context/
│   └── AppContext.tsx    # 空占位：// AppContext placeholder
├── types/
│   └── index.ts         # 空占位
├── services/
│   └── api.ts           # 仅 API_BASE = 'http://localhost:8000/api'
├── hooks/
│   └── .gitkeep
├── components/
│   ├── ActionLogItem/.gitkeep
│   ├── ChannelTab/.gitkeep
│   └── ChatBubble/.gitkeep
└── views/
    ├── DemoView/DemoView.tsx     # 占位："演示视图 - 待实现"
    ├── AdminView/AdminView.tsx   # 占位："管理视图 - 待实现"
    └── HistoryView/HistoryView.tsx # 占位："历史视图 - 待实现"
```

**已安装依赖（package.json）：**
- react: ^19.2.0, react-dom: ^19.2.0
- antd: ^6.3.1（Ant Design v6，CSS Variables 默认启用）
- react-router-dom: ^7.13.1
- typescript: ~5.9.3, vite: ^7.3.1

**⚠️ 必须修复的 Bug：** `main.tsx` 中 ConfigProvider 有两个重复的 `locale={zhCN}` 属性，需删除其中一个。

### TypeScript 类型定义（镜像后端 Pydantic 模型）

所有 JSON 字段使用 snake_case（与后端一致），前端 TypeScript 接口中也使用 snake_case 字段名。

```typescript
// 枚举类型 — 使用 string union type（非 TypeScript enum）
type ActionType = 'intent_recognition' | 'skill_loaded' | 'tool_call' | 'waiting' | 'message_sent' | 'completed';
type ActionStatus = 'running' | 'success' | 'error';
type SessionStatus = 'idle' | 'running' | 'completed' | 'error';
type Channel = 'chat' | 'downstream' | 'upstream';

// 核心数据模型
interface ActionLogEntry {
  index: number;
  action_type: ActionType;
  title: string;
  summary: string;
  status: ActionStatus;
  detail: Record<string, unknown> | null;
  timestamp: string;  // ISO 8601
}

interface ChannelMessage {
  channel: Channel;
  sender: string;
  content: string;
  timestamp: string;
}

interface AgentExecutionState {
  session_id: string;
  status: SessionStatus;
  actions: ActionLogEntry[];
  final_reply: string | null;
  unread_channels: string[];
}

// API 专用模型
interface SkillDefinition {
  skill_id: string;
  name: string;
  description: string;
  content: string;
}

interface ToolDefinition {
  name: string;
  description: string;
  parameters: Record<string, unknown>;
}

interface ExecutionHistory {
  execution_id: string;
  trigger_message: string;
  skill_name: string | null;
  status: SessionStatus;
  actions: ActionLogEntry[];
  created_at: string;
}

// 请求/响应模型
interface ChatResponse {
  session_id: string;
}

interface StatusResponse {
  session_id: string;
  status: SessionStatus;
  new_actions?: ActionLogEntry[];  // 增量模式
  actions?: ActionLogEntry[];      // 完整模式
  unread_channels: string[];
  final_reply: string | null;
}

interface ErrorResponse {
  error: true;
  error_type: string;
  message: string;
}
```

### API 服务层设计

所有后端 API 调用封装在 `src/services/api.ts` 中，禁止在组件中直接使用 fetch。

```typescript
const API_BASE = 'http://localhost:8000/api';

// 统一错误处理 — 检查 JSON 中的 error 字段
async function request<T>(url: string, options?: RequestInit): Promise<T> {
  const response = await fetch(url, options);
  const data = await response.json();
  if (data.error) {
    throw new Error(data.message || '请求失败');
  }
  return data as T;
}

// 对应 9 个后端端点
export async function sendMessage(message: string): Promise<ChatResponse> { ... }
export async function pollStatus(sessionId: string, afterIndex?: number): Promise<StatusResponse> { ... }
export async function getMessages(channel: Channel): Promise<ChannelMessage[]> { ... }
export async function getSkills(): Promise<SkillDefinition[]> { ... }
export async function getSkillDetail(skillId: string): Promise<SkillDefinition> { ... }
export async function getTools(): Promise<ToolDefinition[]> { ... }
export async function deleteSession(): Promise<void> { ... }
export async function getHistory(): Promise<ExecutionHistory[]> { ... }
export async function getHistoryDetail(executionId: string): Promise<ExecutionHistory> { ... }
```

**注意：** GET /api/skills/{skill_id}、GET /api/tools、DELETE /api/session、GET /api/history 端点后端尚未实现（属于后续 Story），但 API 封装函数现在就可以写好，调用时会返回错误。

### React Context 设计

```typescript
interface AppState {
  sessionId: string | null;
  sessionStatus: SessionStatus;
  actions: ActionLogEntry[];
  currentChannel: Channel;
  unreadChannels: Set<string>;
  finalReply: string | null;
}
```

使用 `useReducer` 管理状态（比多个 useState 更适合复杂状态）。AppProvider 在 App.tsx 中包裹路由组件。

### 布局结构

```
┌──────────────────────────────────────────────────┐
│  Header 56px: [演示] [管理] [历史]     [清空会话] │
├──────────────────┬───────────────────────────────┤
│  左侧 35%        │  右侧 65%                     │
│  MessagePanel    │  ActionLogPanel               │
│                  │                               │
│  频道 Tab 占位    │  空状态：                     │
│  [对话][下游][上游]│  "发送一条消息，               │
│                  │   观看 Agent 的工作过程"       │
│                  │                               │
│  (消息区域)      │                               │
│                  │                               │
│  ┌────────────┐  │                               │
│  │输入框  [发送]│  │                               │
│  └────────────┘  │                               │
├──────────────────┴───────────────────────────────┤
```

### Ant Design 组件使用

| 功能 | 组件 | 用法 |
|------|------|------|
| 顶部导航 | Layout.Header + Menu | Menu mode="horizontal"，items 包含三个导航项 |
| 左右分屏 | Layout.Content 内嵌 div | 使用 CSS flex 布局（35%/65%），不使用 Layout.Sider（Sider 适合固定侧边栏，不适合百分比分屏） |
| 频道 Tab | Tabs | items 属性定义三个 tab（Ant Design v6 已废弃 TabPane 子组件，必须使用 items） |
| 输入框 | Input + Button | Input.Search 或 Input + Button 组合 |
| 空状态 | Empty 或 自定义文字 | 居中灰色文字 |
| 清空按钮 | Button | 占位，无功能 |

**⚠️ Ant Design v6 重要变更：**
- `Tabs.TabPane` 已废弃 → 必须使用 `items` 属性
- CSS Variables 模式默认启用，不需要额外配置
- 使用 `@ant-design/icons` v6（与 antd v6 配套）

### 导航栏与路由集成

```typescript
import { useNavigate, useLocation } from 'react-router-dom';

// Menu items 定义
const menuItems = [
  { key: '/', label: '演示' },
  { key: '/admin', label: '管理' },
  { key: '/history', label: '历史' },
];

// 当前路由高亮
const location = useLocation();
const selectedKey = location.pathname;

// 点击导航
const navigate = useNavigate();
const handleMenuClick = ({ key }: { key: string }) => navigate(key);
```

**注意：** React Router v7 仍然支持从 `react-router-dom` 导入（兼容模式），现有 App.tsx 的 BrowserRouter 模式无需改为 createBrowserRouter。

### 文件组织

本 Story 修改/创建的文件：

```
frontend/src/
├── App.tsx                    # 修改：添加 Layout.Header 导航栏、AppProvider 包裹
├── main.tsx                   # 修改：修复重复 locale 属性
├── types/
│   └── index.ts              # 重写：完整 TypeScript 类型定义
├── services/
│   └── api.ts                # 重写：完整 API 服务层封装
├── context/
│   └── AppContext.tsx         # 重写：React Context 全局状态
└── views/
    ├── DemoView/
    │   ├── DemoView.tsx       # 重写：左右分屏布局
    │   ├── MessagePanel.tsx   # 新增：左侧消息面板
    │   └── ActionLogPanel.tsx # 新增：右侧动作日志面板
    ├── AdminView/
    │   └── AdminView.tsx      # 重写：管理视图占位
    └── HistoryView/
        └── HistoryView.tsx    # 重写：历史视图占位
```

**禁止创建/修改的文件：**
- components/ActionLogItem/* — Story 1.8 负责
- components/ChatBubble/* — Story 1.7 负责
- components/ChannelTab/* — Story 1.7 负责
- hooks/usePolling.ts — Story 1.8 负责
- hooks/useSession.ts — Story 1.7/1.8 负责
- backend/ 目录下的任何文件

### 样式规范

| 元素 | 尺寸/色值 | 来源 |
|------|---------|------|
| 导航栏高度 | 56px | UX 设计文档 |
| 左侧面板宽度 | 35% | UX 设计文档 |
| 右侧面板宽度 | 65% | UX 设计文档 |
| 面板内边距 | 24px | UX 设计文档（8px 倍数体系） |
| 主色调 | #1677FF | 已在 ConfigProvider 配置 |
| 页面背景 | #F5F5F5 | UX 设计文档 |
| 面板背景 | #FFFFFF | UX 设计文档 |
| 页面标题字号 | 24px/600 | UX 设计文档 |
| 区域标题字号 | 18px/600 | UX 设计文档 |
| 正文字号 | 14px/400 | UX 设计文档 |

### 命名规范

| 场景 | 规则 | 示例 |
|------|------|------|
| TypeScript 变量/函数 | camelCase | `sendMessage`, `pollStatus`, `sessionId` |
| TypeScript 类型/接口 | PascalCase | `ActionLogEntry`, `StatusResponse` |
| 组件文件名 | PascalCase.tsx | `DemoView.tsx`, `MessagePanel.tsx` |
| 非组件文件名 | camelCase.ts | `api.ts`, `usePolling.ts` |
| TypeScript 接口中的 JSON 字段 | snake_case | `session_id`, `action_type`, `new_actions` |

**关键：TypeScript 接口字段名使用 snake_case（与后端 JSON 字段一致），不做 camelCase 转换。** 这是架构决策——前端通过 TypeScript 接口定义做类型映射，字段名保持与 API 完全一致。

### 后端 API 端点速查

| 端点 | 方法 | 状态 | 用途 |
|------|------|------|------|
| `/api/chat` | POST | ✅ 已实现 | 发送消息，返回 session_id |
| `/api/status/{session_id}` | GET | ✅ 已实现 | 轮询执行状态 |
| `/api/messages/{channel}` | GET | ✅ 已实现 | 获取频道消息 |
| `/api/health` | GET | ✅ 已实现 | 健康检查 |
| `/api/skills` | GET | ❌ 未实现 | 获取 Skill 列表 |
| `/api/skills/{skill_id}` | GET | ❌ 未实现 | 获取 Skill 详情 |
| `/api/tools` | GET | ❌ 未实现 | 获取工具列表 |
| `/api/session` | DELETE | ❌ 未实现 | 清空会话 |
| `/api/history` | GET | ❌ 未实现 | 获取历史记录 |
| `/api/history/{execution_id}` | GET | ❌ 未实现 | 获取执行详情 |

### 前一个 Story (1.5) 关键成果

- **3 个 REST API 路由**：chat.py、status.py、messages.py
- **4 个 API Pydantic 模型**：ChatRequest、ChatResponse、ErrorResponse、StatusResponse
- **统一错误处理**：HTTPException、RequestValidationError、通用 Exception 三级处理
- **151 个后端测试全部通过**
- **API 响应 JSON 字段为 snake_case**

### Git 智能

最近 commits：
```
28f8073 Complete Story 1.5: 后端 REST API 与通信层
dc7dcff Complete Story 1.4: Agent 引擎与提前离店 Skill
4a4106c Complete Story 1.3: 模拟工具与模拟数据
2104e42 Complete Story 1.2: 数据模型与内存存储
dca5dfc Complete Story 1.1: 项目初始化与开发环境搭建
```

代码模式观察：
- 每个 Story 完成后单独 commit，commit message 格式："Complete Story X.Y: 标题"
- Python 使用 snake_case，类使用 PascalCase
- TypeScript 组件使用 PascalCase 文件名
- 后端测试集中在 backend/tests/ 目录
- 前端尚无测试（Demo 阶段不要求前端单元测试）

### 架构边界提醒

**本 Story 的职责边界：**
- 建立前端基础设施层（类型、API 封装、Context）
- 建立视觉框架（导航、布局）
- 为 Story 1.7/1.8 提供可插拔的容器

**与后续 Story 的接口：**
- Story 1.7 将使用 `AppContext` 管理消息状态，使用 `api.sendMessage()` 发送消息
- Story 1.8 将使用 `AppContext` 管理动作日志状态，实现 `usePolling` hook 调用 `api.pollStatus()`
- Story 1.7 将实现 ChatBubble、ChannelTab 组件填入 MessagePanel
- Story 1.8 将实现 ActionLogItem 组件填入 ActionLogPanel

### Project Structure Notes

- 本 Story 遵循架构文档定义的前端目录结构
- 组件按功能模块组织（views/ 下按视图分目录）
- services/ 是唯一的 API 调用出口，组件禁止直接 fetch
- context/ 是唯一的全局状态管理入口

### References

- [Source: _bmad-output/planning-artifacts/architecture.md#Frontend Architecture] — 前端组件组织、路由、状态管理方案
- [Source: _bmad-output/planning-artifacts/architecture.md#Naming Patterns] — TypeScript camelCase、API JSON snake_case 规则
- [Source: _bmad-output/planning-artifacts/architecture.md#Structure Patterns] — 前端 src/ 目录组织
- [Source: _bmad-output/planning-artifacts/architecture.md#API & Communication Patterns] — 9 个 REST 端点定义、错误处理标准
- [Source: _bmad-output/planning-artifacts/architecture.md#Communication Patterns] — action_type/status/channel 枚举值定义
- [Source: _bmad-output/planning-artifacts/ux-design-specification.md#Visual Design Foundation] — 色彩系统、字号层级、间距体系
- [Source: _bmad-output/planning-artifacts/ux-design-specification.md#Design Direction Decision] — 左右分屏布局、三频道设计、动作日志行为
- [Source: _bmad-output/planning-artifacts/ux-design-specification.md#Component Strategy] — Ant Design 组件映射、3 个自定义组件定义
- [Source: _bmad-output/planning-artifacts/ux-design-specification.md#UX Consistency Patterns] — 空状态设计、导航模式、按钮层级
- [Source: _bmad-output/planning-artifacts/epics.md#Story 1.6] — 验收标准（8 条 AC）
- [Source: _bmad-output/implementation-artifacts/1-5-后端-rest-api-与通信层.md] — 后端 API 端点实现详情、Pydantic 模型定义

## Dev Agent Record

### Agent Model Used

Claude Opus 4.6 (claude-opus-4-6)

### Debug Log References

- ESLint react-refresh/only-export-components warning for AppContext.tsx — resolved with eslint-disable comment (standard React Context pattern)
- main.tsx duplicate locale attribute noted in story spec was not present in actual file — no fix needed

### Completion Notes List

- Task 1: 在 `src/types/index.ts` 定义完整 TypeScript 类型系统 — 4 个枚举类型（ActionType、ActionStatus、SessionStatus、Channel）、3 个核心数据模型（ActionLogEntry、ChannelMessage、AgentExecutionState）、3 个 API 模型（SkillDefinition、ToolDefinition、ExecutionHistory）、4 个请求/响应模型（ChatResponse、StatusResponse、ErrorResponse）。所有 JSON 字段使用 snake_case 与后端一致。
- Task 2: 在 `src/services/api.ts` 封装完整 API 服务层 — 统一 `request<T>()` 函数处理 fetch + 错误检查，10 个导出函数覆盖所有 9 个后端端点（sendMessage、pollStatus、getMessages、getSkills、getSkillDetail、getTools、deleteSession、getHistory、getHistoryDetail）
- Task 3: 在 `src/context/AppContext.tsx` 实现 React Context 全局状态 — AppState 接口包含 sessionId、sessionStatus、actions、currentChannel、unreadChannels、messages、finalReply。使用 useReducer 管理 9 种 action 类型。导出 AppProvider 组件和 useAppContext hook。
- Task 4: 重写 `App.tsx` 实现顶部导航栏 — Ant Design Layout.Header（56px）+ Menu（horizontal 模式）包含三个导航项（演示/管理/历史），通过 React Router useNavigate/useLocation 实现路由切换和当前路由高亮。右侧预留"清空会话"Button（disabled）。AppProvider 包裹整个路由。
- Task 5: 实现演示视图左右分屏 — DemoView.tsx 使用 flex 布局（35%/65%），MessagePanel.tsx 包含 Tabs（对话/下游群/上游群）+ 消息区域 + 输入框占位（disabled），ActionLogPanel.tsx 显示空状态欢迎提示（RobotOutlined 图标 + "发送一条消息，观看 Agent 的工作过程"）
- Task 6: 管理视图（Card 布局含 Skill 列表和工具列表 Empty 占位）、历史视图（Empty 提示"暂无执行记录"）
- Task 7: TypeScript 编译 0 错误、Vite 构建成功（2.45s）、ESLint 0 error、后端 151 测试全部通过零回归

### File List

**新增文件:**
- frontend/src/views/DemoView/MessagePanel.tsx
- frontend/src/views/DemoView/ActionLogPanel.tsx

**修改文件:**
- frontend/src/types/index.ts（重写：完整 TypeScript 类型定义）
- frontend/src/services/api.ts（重写：完整 API 服务层）
- frontend/src/context/AppContext.tsx（重写：React Context 全局状态）
- frontend/src/App.tsx（重写：导航栏 + AppProvider + Layout）
- frontend/src/views/DemoView/DemoView.tsx（重写：左右分屏布局）
- frontend/src/views/AdminView/AdminView.tsx（重写：管理视图占位）
- frontend/src/views/HistoryView/HistoryView.tsx（重写：历史视图占位）
- frontend/package.json（新增 @ant-design/icons 显式依赖）

## Change Log

- 2026-02-27: 完成 Story 1.6 全部 7 个 Task — TypeScript 类型系统（镜像后端 Pydantic 模型）、API 服务层（10 个函数覆盖 9 端点）、React Context 全局状态（useReducer + 9 种 action）、顶部导航栏（Ant Design Layout.Header + Menu + React Router 集成）、演示视图左右分屏布局（35%/65% MessagePanel + ActionLogPanel）、管理/历史视图占位。TypeScript 编译 0 错误，Vite 构建成功，ESLint 通过，后端 151 测试零回归。
- 2026-02-27: Code Review 修复 6 项 — [H1] request() 添加 response.ok 检查和非 JSON 响应容错；[H2] deleteSession() 添加错误处理替代静默 fetch；[M1] 补充缺失的 ChatRequest 类型；[M2] 导出 AppAction 类型供消费方使用；[M3] 显式添加 @ant-design/icons 依赖；[M4] 修正 File List 中 main.tsx 虚假修改声明。
